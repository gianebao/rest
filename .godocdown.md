# ReST Server

## Example:
<code>
func m1ain () {
    var (
        aLog        = createTempFile()
        h           *rest.Host
        s           *rest.Server
        err         error
    )

    if aLog, err = ioutil.TempFile("", ""); err != nil {
        log.Fatal(err)
    }

    handler = handlers.LoggingHandler(s.AccessLog, h(s.Router))
    defer s.AccessLog.Close()


    if err = aLog.Close(); err != nil {
        log.Fatal(err)
    }

    if s, err = rest.NewServer("http://0.0.0.0:1"); err != nil {
        panic(err)
    }
    
    s.SetRoutes(
        mux.NewRouter().StrictSlash(true),
        rest.NewRoutes().
            Add("Test", "/test2", new(Mock2Resource)).
            Add("TestId", "/test/{id}", new(MockResource)).
            Root(func(w http.ResponseWriter, r *http.Request) {
                fmt.Fprint(w, ResponseRoot)
            }).
            NotFound(rest.DefaultNotFoundRouteHandler))

        s.Listen(func(m *mux.Router) http.Handler {
            channelResp = channelOK
            return m
        })

    s.Listen()
}


const (
    channelOK = "ServerOK!"
)

if h, err = rest.NewHost("http://0.0.0.0:8999"); err != nil {
    panic(err)
}

defer os.Remove(aLog.Name())

if s, err = h.NewServer(aLog.Name()); err != nil {
    panic(err)
}

s.SetRoutes(
    mux.NewRouter().StrictSlash(true),
    rest.NewRoutes().
        Add("Test", "/test2", new(Mock2Resource)).
        Add("TestId", "/test/{id}", new(MockResource)).
        Root(func(w http.ResponseWriter, r *http.Request) {
            fmt.Fprint(w, ResponseRoot)
        }).
        NotFound(rest.DefaultNotFoundRouteHandler))

    s.Listen()

// Output:
//
</code>

{{.Emit}}
